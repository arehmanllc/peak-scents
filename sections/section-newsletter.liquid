<!-- /sections/section-newsletter.liquid -->
{%- style -%}
.section-newsletter{
	position: relative;
	overflow: hidden;
}
.section-newsletter .wrapper{
	position: relative;
	z-index: 1;
}
	.section-newsletter::before {
		content: '';
		position: absolute;
		width: 100%;
		height: 100%;
		top: 0;
		left: 0;
		background-image: url({{ section.settings.bg_image | img_url: '2048x' }});
		background-color: rgba(0, 0, 0, 0.5);
		background-size: cover;
		background-position: center;
		background-repeat: no-repeat;
	}
	.section-newsletter::after {
		content: '';
		position: absolute;
		width: 100%;
		height: 100%;
		top: 0;
		left: 0;
		background-color: rgba(0, 0, 0, 0.5);
	}
{%- endstyle -%}
<div class="section-newsletter {{ section.settings.bg }}"
  style="--PT: {{ section.settings.padding_top }}px; --PB: {{ section.settings.padding_bottom }}px;">
  <div class="{{ section.settings.width }} section-padding">
    <div class="one-whole text-center">
      {% if section.settings.title != '' %}
        <h2 class="kicker-flourished mb-r11">{{ section.settings.title | escape }}</h2>
      {% endif %}
      {% if section.settings.richtext != blank %}
        <div class="rte body-size-4">
          {{ section.settings.richtext }}
        </div>
      {% endif %}

      <div class="newsletter__contain">
        {% assign unique =  'section-newsletter' | append: section.id %}
        {% render 'newsletter-form', unique: unique %}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
	"name": "Newsletter",
	"settings": [
		{
			"type": "text",
			"id": "title",
			"label": "Title",
			"default": "Newsletter"
		},
		{
			"id": "richtext",
			"type": "richtext",
			"label": "Text",
			"default": "<p>Join to get special offers, free giveaways, and once-in-a-lifetime deals.</p>"
		},{
				"type": "image_picker",
				"id": "bg_image",
				"label": "Background Image"
			},
		{
			"type": "select",
			"id": "bg",
			"label": "Background color",
			"default": "palette--light bg--neutral",
			"options": [
				{
					"value": "palette--light bg--neutral",
					"label": "Default"
				},
				{
					"value": "palette--light bg--accent",
					"label": "Light"
				},
				{
					"value": "palette--dark bg--invert",
					"label": "Dark"
				},
				{
					"value": "palette--dark bg--invert--accent",
					"label": "Dark accent"
				},
				{
					"value": "palette--bright bg--bright",
					"label": "Bright"
				},
				{
					"value": "palette--bright bg--bright--accent",
					"label": "Bright accent"
				}
			]
		},
		{
			"type": "paragraph",
			"content": "Subscribers are under 'Accepts Marketing' in your [customer admin](/admin/customers)."
		},
		{
			"type": "header",
			"content": "Section spacing"
		},
		{
			"type": "select",
			"id": "width",
			"label": "Width",
			"default": "wrapper",
			"options": [
				{
					"value": "wrapper--full",
					"label": "Full width padded"
				},
				{
					"value": "wrapper",
					"label": "Page width"
				},
				{
					"value": "wrapper--narrow",
					"label": "Page width narrow"
				}
			]
		},
		{
			"type": "range",
			"id": "padding_top",
			"min": 0,
			"max": 180,
			"step": 2,
			"unit": "px",
			"label": "Padding top",
			"default": 36
		},
		{
			"type": "range",
			"id": "padding_bottom",
			"min": 0,
			"max": 180,
			"step": 2,
			"unit": "px",
			"label": "Padding bottom",
			"default": 36
		}
	],
	"presets": [
		{
			"name": "Newsletter"
		}
	],
	"disabled_on": {
		"groups": [
			"header",
			"aside"
		]
	}
}
{% endschema %}
